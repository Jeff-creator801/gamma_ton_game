<!doctype html>

<html lang="ru">Â Â   
<head>Â Â   
Â Â <meta charset="utf-8" />Â Â   
Â Â <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />Â Â   
Â Â <title>GammaTon â€” ĞœĞ¸Ğ½Ğ¸-Ğ¸Ğ³Ñ€Ğ°</title>Â Â   
Â Â <script src="https://telegram.org/js/telegram-web-app.js"></script>Â Â   
Â Â <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>Â Â   
Â Â <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>Â Â   
Â Â <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>Â Â   
Â Â <script src="https://unpkg.com/@tonconnect/ui@2.0.8/dist/tonconnect-ui.min.js"></script>Â  Â  <style>Â Â   
Â Â Â Â :root{--bg:#0b0f1a;--card:#11182a;--text:#e8eeff;--muted:#9fb7ff66;--accent:#5c8dff;--radius:18px}Â Â   
Â Â Â Â *{box-sizing:border-box}html,body{height:100%}body{margin:0;background:radial-gradient(1200px 600px at 50% -100px,#1a2453 0%,#0b0f1a 55%,#08102a 100%);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Inter,Arial;}Â Â   
Â Â Â Â .app{display:flex;flex-direction:column;height:100vh;overflow:hidden}Â Â   
Â Â Â Â .top{position:relative;display:flex;justify-content:center;align-items:center;padding:10px 16px}Â Â   
Â Â Â Â .title{font-weight:700}Â Â   
Â Â Â Â .float-wrap{position:absolute;left:12px;top:8px;display:flex;flex-direction:column;gap:10px;z-index:5}Â Â   
Â Â Â Â .float-right{left:auto;right:12px}Â Â   
Â Â Â Â .round{width:46px;height:46px;border-radius:50%;background:linear-gradient(160deg,#1e2a4f,#0f1630);display:grid;place-items:center;border:1px solid #ffffff14;cursor:pointer}Â Â   
Â Â Â Â .views{flex:1;position:relative;overflow:hidden}Â Â   
Â Â Â Â .view{position:absolute;inset:0;padding:12px 12px 88px;overflow-y:auto;opacity:0;transform:translateX(20px);transition:opacity .25s ease,transform .3s ease}Â Â   
Â Â Â Â .view.active{opacity:1;transform:translateX(0)}Â Â   
Â Â Â Â .card{background:linear-gradient(180deg,#121a30,#0e1426);border:1px solid #ffffff10;border-radius:var(--radius);padding:14px;margin:10px 0}Â Â   
Â Â Â Â .stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}Â Â   
Â Â Â Â .stat{background:linear-gradient(180deg,#141e38,#0f1730);border-radius:12px;padding:10px;text-align:center}Â Â   
Â Â Â Â .muted{opacity:.8;font-size:13px}Â Â   
Â Â Â Â .shop-item{display:flex;gap:10px;align-items:center;justify-content:space-between;background:linear-gradient(180deg,#111a34,#0c1327);border-radius:12px;padding:10px;margin:8px 0}Â Â   
Â Â Â Â .img{width:54px;height:54px;border-radius:12px;background:#0b1226;display:grid;place-items:center}Â Â   
Â Â Â Â .btn{border:none;background:linear-gradient(180deg,#5c8dff,#3b6dff);padding:10px 14px;border-radius:12px;color:white;font-weight:700;cursor:pointer}  
.btn.secondary{background:linear-gradient(180deg,#2a3355,#1a2344)}Â Â   
Â Â Â Â .nav{position:fixed;inset:auto 0 0;display:grid;grid-template-columns:repeat(5,1fr);gap:8px;padding:10px;border-top:1px solid #ffffff10;background:linear-gradient(180deg,#0b0f1aee,#0b0f1aff)}Â Â   
Â Â Â Â .nav .item{display:flex;flex-direction:column;align-items:center;gap:4px;color:#cfe0ffcc;font-size:11px}Â Â   
Â Â Â Â input{background:#0b1226;border:1px solid #ffffff18;padding:10px;border-radius:10px;color:#fff}Â Â   
Â Â </style>Â  </head>Â Â   
<body>Â Â   
<div class="app">Â Â   
Â Â <div class="top">Â Â   
Â Â Â Â <div class="float-wrap">Â Â   
Â Â Â Â Â Â <button class="round" id="btnEnergyWheel" title="Ğ ÑƒĞ»ĞµÑ‚ĞºĞ° ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸">âš¡</button>Â Â   
Â Â Â Â Â Â <button class="round" id="btnLuckWheel" title="Ğ ÑƒĞ»ĞµÑ‚ĞºĞ° ÑƒĞ´Ğ°Ñ‡Ğ¸">ğŸ²</button>Â Â   
Â Â Â Â </div>Â Â   
Â Â Â Â <div class="float-wrap float-right">Â Â   
Â Â Â Â Â Â <button class="round" id="btnPremium" title="ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼">â­</button>Â Â   
Â Â Â Â </div>Â Â   
Â Â Â Â <div class="title">GammaTon</div>Â Â   
Â Â </div>Â  Â  <div class="views">Â Â   
Â Â Â Â <!-- City -->Â Â   
Â Â Â Â <section class="view active" id="view-city">Â Â   
Â Â Â Â Â Â <div class="card">Â Â   
Â Â Â Â Â Â Â Â <h3>Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ</h3>Â Â   
Â Â Â Â Â Â Â Â <div class="stats">Â Â   
Â Â Â Â Â Â Â Â Â Â <div class="stat"><div class="val" id="energy">0</div><div class="muted">Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ</div></div>Â Â   
Â Â Â Â Â Â Â Â Â Â <div class="stat"><div class="val" id="gamma">0</div><div class="muted">Gamma coin</div></div>Â Â   
Â Â Â Â Â Â Â Â Â Â <div class="stat"><div class="val" id="ton">0</div><div class="muted">TON</div></div>Â Â   
Â Â Â Â Â Â Â Â </div>Â Â   
Â Â Â Â Â Â Â Â <div style="margin-top:8px" class="muted">Ğ”Ğ¾Ğ±Ñ‹Ñ‡Ğ° Ğ¸Ğ´Ñ‘Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 1 Ñ‡Ğ°Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°, Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¾ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ â€” Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Â«ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ±Ñ‹Ñ‡ÑƒÂ». ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ´Ğ°Ñ‘Ñ‚ +20% Ğº Ğ´Ğ¾Ğ±Ñ‹Ñ‡Ğµ Ğ¸ +2000 Î³ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞµ.</div>Â Â   
Â Â Â Â Â Â </div>Â  <div class="card">Â Â   
Â Â Â Â <h3>Ğ’Ğ°ÑˆĞ¸ Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ</h3>Â Â   
Â Â Â Â <div id="buildingsList"></div>Â Â   
Â Â Â Â <div style="margin-top:10px;display:flex;gap:8px">Â Â   
Â Â Â Â Â Â <button class="btn secondary" id="btnRestartProduction">ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ±Ñ‹Ñ‡Ñƒ (1 Ñ‡Ğ°Ñ)</button>Â Â   
Â Â Â Â </div>Â Â   
Â Â </div>Â Â   
</section>Â Â   
<!-- Shop -->Â Â   
<section class="view" id="view-shop">Â Â   
Â Â <div class="card"><h3>ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½ Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¹</h3>Â Â   
Â Â Â Â <div id="shopList"></div>Â Â   
Â Â </div>Â Â   
</section>Â Â   
<!-- Events -->Â Â   
<section class="view" id="view-events">Â Â   
Â Â <div class="card"><h3>Ğ˜Ğ²ĞµĞ½Ñ‚Ñ‹</h3>Â Â   
Â Â Â Â <div class="muted">ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¸Ğ²ĞµĞ½Ñ‚ Ñ‡ĞµÑ€ĞµĞ· Ğ½ĞµĞ´ĞµĞ»Ñ â€” ÑĞ¼Ğ¾Ñ‚Ñ€Ğ¸Ñ‚Ğµ Ğ¾Ğ±ÑŠÑĞ²Ğ»ĞµĞ½Ğ¸Ñ Ğ² ĞºĞ°Ğ½Ğ°Ğ»Ğµ.</div>Â Â   
Â Â </div>Â Â   
</section>Â Â   
<!-- Leaderboard -->Â Â   
<section class="view" id="view-leaderboard">Â Â   
Â Â <div class="card"><h3>Ğ›Ğ¸Ğ´ĞµÑ€Ğ±Ğ¾Ñ€Ğ´</h3>Â Â   
Â Â Â Â <div id="leaderboard"></div>Â Â   
Â Â </div>Â Â   
</section>Â Â   
<!-- Exchange -->Â Â   
<section class="view" id="view-exchange">Â Â   
Â Â <div class="card">Â Â   
Â Â Â Â <h3>ĞĞ±Ğ¼ĞµĞ½ Ğ¸ ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ</h3>Â Â   
Â Â Â Â <div class="muted">ĞšÑƒÑ€ÑÑ‹: 100000 Î³ = 1 TON | 10000 ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ = 10 Î³. ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ: Ğ¾Ñ‚ 1 TON (ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ 10%). Ğ’Ñ‹Ğ²Ğ¾Ğ´: Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ ÑÑ€Ğ°Ğ·Ñƒ (ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ 10%).</div>Â Â   
Â Â Â Â <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px">Â Â   
Â Â Â Â Â Â <button class="btn" id="btnGammaToTon">Î³ â†’ TON</button>Â Â   
Â Â Â Â Â Â <button class="btn" id="btnEnergyToTon">Ğ­Ğ½ĞµÑ€Ğ³Ğ¸Ñ â†’ Î³</button>Â Â   
Â Â Â Â </div>Â Â   
Â Â </div>Â Â   
Â Â <div class="card">Â Â   
Â Â Â Â <h3>ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ TON (TON Connect)</h3>Â Â   
Â Â Â Â <div id="tonconnect"></div>Â Â   
Â Â Â Â <div style="margin-top:8px" class="muted">ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 1 TON, Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ 100 TON. ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ 10% ÑƒĞ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¸.</div>Â Â   
Â Â Â Â <button class="btn" id="btnDepositTon">ĞŸĞ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ TON</button>Â Â   
Â Â Â Â <div id="depositStatus" class="muted" style="margin-top:8px"></div>Â Â   
Â Â </div>Â Â   
Â Â <div class="card">Â Â   
Â Â Â Â <h3>Ğ’Ñ‹Ğ²Ğ¾Ğ´ ÑÑ€ĞµĞ´ÑÑ‚Ğ²</h3>Â Â   
Â Â Â Â <div class="muted">Ğ’Ñ‹Ğ²Ğ¾Ğ´ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ ÑÑ€Ğ°Ğ·Ñƒ. ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ 10% ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ñ€Ğ¸ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ°.</div>Â Â   
Â Â Â Â <input id="withdrawAddress" placeholder="TON-Ğ°Ğ´Ñ€ĞµÑ" style="width:100%;margin:8px 0" />Â Â   
Â Â Â Â <input id="withdrawAmount" placeholder="CÑƒĞ¼Ğ¼Ğ° (TON)" type="number" min="0" step="0.01" style="width:100%;margin-bottom:8px" />Â Â   
Â Â Â Â <button class="btn secondary" id="btnWithdraw">ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ²Ñ‹Ğ²Ğ¾Ğ´</button>Â Â   
Â Â Â Â <div id="withdrawStatus" class="muted" style="margin-top:8px"></div>Â Â   
Â Â </div>Â Â   
</section>  
</div>Â  Â  <nav class="nav">Â Â   
Â Â Â Â <button class="item" data-view="events"><div class="ico">ğŸ‰</div>Ğ˜Ğ²ĞµĞ½Ñ‚Ñ‹</button>Â Â   
Â Â Â Â <button class="item" data-view="shop"><div class="ico">ğŸ›’</div>ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½</button>Â Â   
Â Â Â Â <button class="item active" data-view="city"><div class="ico">ğŸ™ï¸</div>Ğ“Ğ¾Ñ€Ğ¾Ğ´</button>Â Â   
Â Â Â Â <button class="item" data-view="leaderboard"><div class="ico">ğŸ†</div>Ğ¢Ğ¾Ğ¿</button>Â Â   
Â Â Â Â <button class="item" data-view="exchange"><div class="ico">ğŸ”</div>ĞĞ±Ğ¼ĞµĞ½</button>Â Â   
Â Â </nav>Â Â   
</div>Â  <script>Â Â   
/* ========= CONFIG ========= */Â Â   
const FIREBASE_CONFIG = {Â Â   
Â Â apiKey: "AIzaSyA2mxa0BR-V7FtqCFxkXtSoOTGUFXbI4M4",Â Â   
Â Â authDomain: "gammaton-fdbfd.firebaseapp.com",Â Â   
Â Â databaseURL: "https://gammaton-fdbfd-default-rtdb.firebaseio.com",Â Â   
Â Â projectId: "gammaton-fdbfd",Â Â   
Â Â storageBucket: "gammaton-fdbfd.firebasestorage.app",Â Â   
Â Â messagingSenderId: "118045498245",Â Â   
Â Â appId: "1:118045498245:web:80ec4a4a7d9528f4c1c2ec"Â Â   
};Â Â   
Â Â   
const OWNER_TON_WALLET = 'UQAmTM_EE8D6seecLKf-h8aXVQasliniDDQ52EvBj7PqExNr';Â Â   
Â Â   
const RATES = {Â Â   
Â Â GAMMA_TO_TON: 100000, Â  // 100000 Î³ -> 1 TONÂ Â   
Â Â ENERGY_TO_GAMMA_PER_10K: 10 // 10000 energy -> 10 Î³Â Â   
};Â Â   
Â Â   
/* ========= BUILDINGS (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 1 ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ, Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾) ========= */Â Â   
const BUILDINGS = {Â Â   
Â Â solar: { id:'solar', name:'Ğ¡Ğ¾Ğ»Ğ½ĞµÑ‡Ğ½Ğ°Ñ Ğ±Ğ°Ñ‚Ğ°Ñ€ĞµÑ', priceGamma:7, earnPerHour:700, emoji:'â˜€ï¸' },Â Â   
Â Â wind:Â  { id:'wind',Â  name:'Ğ’Ğ¾Ğ·Ğ´ÑƒÑˆĞ½Ğ°Ñ Ğ±Ğ°Ñ‚Ğ°Ñ€ĞµÑ',Â  priceGamma:21, earnPerHour:2100, emoji:'ğŸŒ¬ï¸' },Â Â   
Â Â water: { id:'water', name:'Ğ’Ğ¾Ğ´Ğ½Ğ°Ñ Ğ±Ğ°Ñ‚Ğ°Ñ€ĞµÑ',Â  Â  priceGamma:76, earnPerHour:5700, emoji:'ğŸ’§' }Â Â   
};Â Â   
Â Â   
/* ========= STATE ========= */Â Â   
let appUser = {Â Â   
Â Â uid: null,Â Â   
Â Â premium: false,Â Â   
Â Â balances: { energy:0, gamma:0, ton:0 },Â Â   
Â Â buildings: {}, // e.g. { solar: true }Â Â   
Â Â lastTick: Date.now(),Â Â   
Â Â productionActiveUntil: 0, // timestamp ms, production runs until thisÂ Â   
Â Â wheels: { energyAt:0 }Â Â   
};Â Â   
Â Â   
let db, auth, userRef;Â Â   
let tonConnectUI;Â Â   
Â Â   
/* ========= INIT ========= */Â Â   
(async function init(){Â Â   
Â Â try{ if(window.Telegram?.WebApp){ Telegram.WebApp.ready(); Telegram.WebApp.expand(); } }catch(e){}Â Â   
Â Â   
Â Â firebase.initializeApp(FIREBASE_CONFIG);Â Â   
Â Â auth = firebase.auth();Â Â   
Â Â db = firebase.database();Â Â   
Â Â await auth.signInAnonymously();Â Â   
Â Â appUser.uid = auth.currentUser.uid;Â Â   
Â Â userRef = db.ref('users/'+appUser.uid);Â Â   
Â Â   
Â Â // load or createÂ Â   
Â Â const snap = await userRef.get();Â Â   
Â Â if(snap.exists()) appUser = {...appUser, ...snap.val()};Â Â   
Â Â else await userRef.set(appUser);Â Â   
Â Â   
Â Â tonConnectUI = new TON_CONNECT_UI.TonConnectUI({ manifestUrl: 'https://ton-connect.github.io/demo-dapp-with-react-ui/tonconnect-manifest.json', buttonRootId: 'tonconnect' });Â Â   
Â Â   
Â Â tickEnergy();Â Â   
Â Â renderAll();Â Â   
Â Â subscribeLeaderboard();Â Â   
})();Â Â   
Â Â   
/* ========= PRODUCTION (1 Ñ‡Ğ°Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹) ========= */Â Â   
function totalHourly(){Â Â   
Â Â let sum = 0;Â Â   
Â Â for(const id of Object.keys(BUILDINGS)){Â Â   
Â Â Â Â if(appUser.buildings[id]){Â Â   
Â Â Â Â Â Â sum += BUILDINGS[id].earnPerHour;Â Â   
Â Â Â Â }Â Â   
Â Â }Â Â   
Â Â if(appUser.premium) sum = Math.floor(sum * 1.2); // +20% Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ¼Ğ¸ÑƒĞ¼Ğ°Â Â   
Â Â return sum;Â Â   
}Â Â   
Â Â   
function tickEnergy(){Â Â   
Â Â const now = Date.now();Â Â   
Â Â const last = appUser.lastTick || now;Â Â   
Â Â let produced = 0;Â Â   
Â Â   
Â Â // Ğ•ÑĞ»Ğ¸ productionActiveUntil > last, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ğ¼ Ğ·Ğ° Ğ¿ĞµÑ€ĞµÑĞµÑ‡ĞµĞ½Ğ¸Ğµ [last, now] Ñ [last, productionActiveUntil]Â Â   
Â Â if(appUser.productionActiveUntil > last){Â Â   
Â Â Â Â const activeFrom = last;Â Â   
Â Â Â Â const activeTo = Math.min(now, appUser.productionActiveUntil);Â Â   
Â Â Â Â const dtHours = Math.max(0, (activeTo - activeFrom) / 3600000);Â Â   
Â Â Â Â const perH = totalHourly();Â Â   
Â Â Â Â produced = Math.floor(perH * dtHours);Â Â   
Â Â Â Â if(produced > 0){Â Â   
Â Â Â Â Â Â appUser.balances.energy = (appUser.balances.energy || 0) + produced;Â Â   
Â Â Â Â }Â Â   
Â Â }Â Â   
Â Â   
Â Â appUser.lastTick = now;Â Â   
Â Â userRef.update({ balances: appUser.balances, lastTick: appUser.lastTick, productionActiveUntil: appUser.productionActiveUntil }).catch(()=>{});  
updateBalancesUI();Â Â   
Â Â   
Â Â // Ğ•ÑĞ»Ğ¸ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ğ»Ğ¾ÑÑŒ â€” Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ°Ğº ĞµÑÑ‚ÑŒ. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ ÑĞ½Ğ¾Ğ²Ğ° Ñ‡ĞµÑ€ĞµĞ· 20 ÑĞµĞº.Â Â   
Â Â setTimeout(()=> tickEnergy(), 20000);Â Â   
}Â Â   
Â Â   
/* ========= RENDER ========= */Â Â   
function n(v){ return (v||0).toLocaleString('ru-RU'); }Â Â   
function updateBalancesUI(){Â Â   
Â Â document.getElementById('energy').textContent = n(appUser.balances.energy);Â Â   
Â Â document.getElementById('gamma').textContentÂ  = n(appUser.balances.gamma);Â Â   
Â Â document.getElementById('ton').textContentÂ  Â  = (appUser.balances.ton||0).toFixed(2);Â Â   
}Â Â   
Â Â   
function renderAll(){Â Â   
Â Â updateBalancesUI();Â Â   
Â Â renderBuildingsOwned();Â Â   
Â Â renderShop();Â Â   
}Â Â   
Â Â   
/* ========= BUILDINGS UI ========= */Â Â   
function renderBuildingsOwned(){Â Â   
Â Â const root = document.getElementById('buildingsList'); root.innerHTML = '';Â Â   
Â Â for(const id of Object.keys(BUILDINGS)){Â Â   
Â Â Â Â if(appUser.buildings[id]){Â Â   
Â Â Â Â Â Â const conf = BUILDINGS[id];Â Â   
Â Â Â Â Â Â const el = document.createElement('div'); el.className='shop-item';Â Â   
Â Â Â Â Â Â el.innerHTML =Â Â Â   
Â Â Â Â Â Â Â Â <div style="display:flex;gap:10px;align-items:center">Â Â   
Â Â Â Â Â Â Â Â Â Â <div class="img">${conf.emoji}</div>Â Â   
Â Â Â Â Â Â Â Â Â Â <div>Â Â   
Â Â Â Â Â Â Â Â Â Â Â Â <div style="font-weight:700">${conf.name}</div>Â Â   
Â Â Â Â Â Â Â Â Â Â Â Â <div class="muted">Ğ”Ğ¾Ñ…Ğ¾Ğ´: ${n(conf.earnPerHour)} ÑĞ½ĞµÑ€Ğ³Ğ¸Ñ/Ñ‡</div>Â Â   
Â Â Â Â Â Â Â Â Â Â </div>Â Â   
Â Â Â Â Â Â Â Â </div>Â Â   
Â Â Â Â Â Â Â Â <div><button class="btn secondary" data-sell="${id}">ĞŸÑ€Ğ¾Ğ´Ğ°Ñ‚ÑŒ</button></div>Â Â   
Â Â Â Â Â Â ;Â Â   
Â Â Â Â Â Â root.appendChild(el);Â Â   
Â Â Â Â }Â Â   
Â Â }Â Â   
Â Â root.querySelectorAll('[data-sell]').forEach(b=>b.addEventListener('click', onSell));Â Â   
}Â Â   
Â Â   
async function onSell(e){Â Â   
Â Â const id = e.currentTarget.getAttribute('data-sell');Â Â   
Â Â // Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ 50% Ğ¾Ñ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ² Î³ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€)Â Â   
Â Â const refund = Math.floor(BUILDINGS[id].priceGamma * 0.5);Â Â   
Â Â delete appUser.buildings[id];Â Â   
Â Â appUser.balances.gamma = (appUser.balances.gamma || 0) + refund;Â Â   
Â Â await userRef.update({ balances: appUser.balances, buildings: appUser.buildings });Â Â   
Â Â renderAll();Â Â   
}Â Â   
Â Â   
/* ========= SHOP ========= */Â Â   
function renderShop(){Â Â   
Â Â const root = document.getElementById('shopList'); root.innerHTML = '';Â Â   
Â Â for(const id of Object.keys(BUILDINGS)){Â Â   
Â Â Â Â const conf = BUILDINGS[id];Â Â   
Â Â Â Â const have = !!appUser.buildings[id];Â Â   
Â Â Â Â const canBuy = !have && ((appUser.balances.gamma||0) >= conf.priceGamma);Â Â   
Â Â Â Â const el = document.createElement('div'); el.className='shop-item';Â Â   
Â Â Â Â el.innerHTML =Â Â Â   
Â Â Â Â Â Â <div style="display:flex;gap:10px;align-items:center">Â Â   
Â Â Â Â Â Â Â Â <div class="img">${conf.emoji}</div>Â Â   
Â Â Â Â Â Â Â Â <div>Â Â   
Â Â Â Â Â Â Â Â Â Â <div style="font-weight:700">${conf.name}</div>Â Â   
Â Â Â Â Â Â Â Â Â Â <div class="muted">${have? 'ĞšÑƒĞ¿Ğ»ĞµĞ½Ğ¾' : (conf.priceGamma + ' Î³')}</div>Â Â   
Â Â Â Â Â Â Â Â </div>Â Â   
Â Â Â Â Â Â </div>Â Â   
Â Â Â Â Â Â <div>Â Â   
Â Â Â Â Â Â Â Â <button class="btn ${canBuy? '':'secondary'}" ${canBuy? '':'disabled'} data-buy="${id}">${have? 'â€”' : 'ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ'}</button>Â Â   
Â Â Â Â Â Â </div>;Â Â   
Â Â Â Â root.appendChild(el);Â Â   
Â Â }Â Â   
Â Â root.querySelectorAll('[data-buy]').forEach(b=>b.addEventListener('click', onBuy));Â Â   
}Â Â   
Â Â   
async function onBuy(e){Â Â   
Â Â const id = e.currentTarget.getAttribute('data-buy');Â Â   
Â Â const conf = BUILDINGS[id];Â Â   
Â Â if(appUser.buildings[id]) return;Â Â   
Â Â if((appUser.balances.gamma||0) < conf.priceGamma) return alert('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Î³');Â Â   
Â Â appUser.balances.gamma -= conf.priceGamma;Â Â   
Â Â appUser.buildings[id] = true;Â Â   
Â Â // Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ´Ğ¾Ğ±Ñ‹Ñ‡Ñƒ Ğ½Ğ° 1 Ñ‡Ğ°Ñ (Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ½ÑƒĞ¶ĞµĞ½ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ)Â Â   
Â Â appUser.productionActiveUntil = Date.now() + 3600000;Â Â   
Â Â await userRef.update({ balances: appUser.balances, buildings: appUser.buildings, productionActiveUntil: appUser.productionActiveUntil });Â Â   
Â Â renderAll();Â Â   
}Â Â   
Â Â   
/* ========= RESTART PRODUCTION ========= */Â Â   
document.getElementById('btnRestartProduction').addEventListener('click', async ()=>{Â Â   
Â Â // Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµĞ¼ Ğ´Ğ¾Ğ±Ñ‹Ñ‡Ñƒ ĞµÑ‰Ñ‘ Ğ½Ğ° 1 Ñ‡Ğ°Ñ  
if(Object.keys(appUser.buildings||{}).length === 0) return alert('Ğ£ Ğ²Ğ°Ñ Ğ½ĞµÑ‚ Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¹. ĞšÑƒĞ¿Ğ¸Ñ‚Ğµ Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ½Ğ¾.');Â Â   
Â Â appUser.productionActiveUntil = Date.now() + 3600000;Â Â   
Â Â await userRef.update({ productionActiveUntil: appUser.productionActiveUntil });Â Â   
Â Â alert('Ğ”Ğ¾Ğ±Ñ‹Ñ‡Ğ° Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½Ğ° ĞµÑ‰Ñ‘ Ğ½Ğ° 1 Ñ‡Ğ°Ñ.');Â Â   
Â Â renderAll();Â Â   
});Â Â   
Â Â   
/* ========= WHEELS ========= */Â Â   
const DAY = 86400000;Â Â   
document.getElementById('btnEnergyWheel').onclick = async ()=>{Â Â   
Â Â const now = Date.now(), last = appUser.wheels?.energyAt || 0;Â Â   
Â Â if(now - last < DAY) return alert('Ğ ÑƒĞ»ĞµÑ‚ĞºĞ° ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ñ€Ğ°Ğ· Ğ² ÑÑƒÑ‚ĞºĞ¸.');Â Â   
Â Â const gain = Math.floor(100 + Math.random()*1901);Â Â   
Â Â appUser.balances.energy += gain;Â Â   
Â Â appUser.wheels.energyAt = now;Â Â   
Â Â await userRef.update({ balances: appUser.balances, wheels: appUser.wheels });Â Â   
Â Â renderAll(); alert('Ğ’Ñ‹ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ»Ğ¸ '+gain+' ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸!');Â Â   
};Â Â   
document.getElementById('btnLuckWheel').onclick = async ()=>{Â Â   
Â Â if((appUser.balances.ton||0) < 1) return alert('ĞÑƒĞ¶Ğ½Ğ¾ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 1 TON Ğ½Ğ° Ğ±Ğ°Ğ»Ğ°Ğ½ÑĞµ.');Â Â   
Â Â appUser.balances.ton -= 1;Â Â   
Â Â let reward = Math.random() < 0.99 ? +(0.5 + Math.random()*0.5).toFixed(2) : +(1 + Math.random()*4).toFixed(2);Â Â   
Â Â appUser.balances.ton += reward;Â Â   
Â Â await userRef.update({ balances: appUser.balances });Â Â   
Â Â renderAll(); alert('Ğ ÑƒĞ»ĞµÑ‚ĞºĞ° ÑƒĞ´Ğ°Ñ‡Ğ¸: Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ñˆ '+reward+' TON');Â Â   
};Â Â   
Â Â   
/* ========= PREMIUM ========= */Â Â   
const PREMIUM_PRICES = { monthly:5, forever:30 };Â Â   
document.getElementById('btnPremium').onclick = async ()=>{Â Â   
Â Â const pick = prompt('ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼: \\n1) ĞœĞµÑÑÑ† â€” 5 TON\\n2) ĞĞ°Ğ²ÑĞµĞ³Ğ´Ğ° â€” 30 TON\\nĞ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ 1 Ğ¸Ğ»Ğ¸ 2');Â Â   
Â Â if(!pick) return;Â Â   
Â Â const price = pick === '2' ? PREMIUM_PRICES.forever : PREMIUM_PRICES.monthly;Â Â   
Â Â if((appUser.balances.ton||0) < price) return alert('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ TON');Â Â   
Â Â appUser.balances.ton -= price;Â Â   
Â Â appUser.premium = true;Â Â   
Â Â appUser.balances.gamma = (appUser.balances.gamma||0) + 2000; // +2000 Î³Â Â   
Â Â await userRef.update({ balances: appUser.balances, premium: appUser.premium });Â Â   
Â Â renderAll(); alert('ĞŸÑ€ĞµĞ¼Ğ¸ÑƒĞ¼ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½: +20% Ğº Ğ´Ğ¾Ñ…Ğ¾Ğ´Ñƒ Ğ¸ +2000 Î³');Â Â   
};Â Â   
Â Â   
/* ========= EXCHANGE & TON CONNECT ========= */Â Â   
function addTon(v){ appUser.balances.ton = +(Math.max(0,(appUser.balances.ton||0) + v)).toFixed(2); }Â Â   
function addGamma(v){ appUser.balances.gamma = Math.max(0,(appUser.balances.gamma||0) + v); }Â Â   
function addEnergy(v){ appUser.balances.energy = Math.max(0,(appUser.balances.energy||0) + v); }Â Â   
Â Â   
document.getElementById('btnGammaToTon').onclick = async ()=>{Â Â   
Â Â const amtGamma = +prompt('Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Î³ Ğ¾Ğ±Ğ¼ĞµĞ½ÑÑ‚ÑŒ Ğ½Ğ° TON? (100000 Î³ = 1 TON)');Â Â   
Â Â if(!amtGamma || amtGamma<=0) return;Â Â   
Â Â if((appUser.balances.gamma||0) < amtGamma) return alert('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Î³');Â Â   
Â Â const lots = Math.floor(amtGamma / RATES.GAMMA_TO_TON);Â Â   
Â Â if(lots <= 0) return alert('ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 100000 Î³');Â Â   
Â Â addGamma(-lots * RATES.GAMMA_TO_TON);Â Â   
Â Â addTon(lots * 1);Â Â   
Â Â await userRef.update({ balances: appUser.balances });Â Â   
Â Â renderAll();Â Â   
};Â Â   
Â Â   
document.getElementById('btnEnergyToTon').onclick = async ()=>{Â Â   
Â Â const amt = +prompt('Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ Ğ¾Ğ±Ğ¼ĞµĞ½ÑÑ‚ÑŒ? (10000 ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸ = 10 Î³)');Â Â   
Â Â if(!amt || amt<=0) return;Â Â   
Â Â if((appUser.balances.energy||0) < amt) return alert('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸');Â Â   
Â Â const lots = Math.floor(amt / 10000);Â Â   
Â Â if(lots <= 0) return alert('ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 10000 ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸');Â Â   
Â Â addEnergy(-lots * 10000);Â Â   
Â Â addGamma(lots * RATES.ENERGY_TO_GAMMA_PER_10K);Â Â   
Â Â await userRef.update({ balances: appUser.balances });Â Â   
Â Â renderAll();Â Â   
};Â Â   
Â Â   
/* ========= DEPOSIT via TON Connect (Ñ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ 10%) ========= */Â Â   
document.getElementById('btnDepositTon').onclick = async ()=>{Â Â   
Â Â try{ await tonConnectUI.connectWallet(); }catch(e){}Â Â   
Â Â const amt = +prompt('Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ° Ğ² TON (1..100)');Â Â   
Â Â if(!amtÂ  amt < 1Â  amt > 100) return alert('Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¾Ñ‚ 1 Ğ´Ğ¾ 100 TON');Â Â   
Â Â const memo = 'dep-'+appUser.uid+'-'+Date.now();  
const tonAmountNano = BigInt(Math.round(amt * 1e9)).toString();Â Â   
Â Â await tonConnectUI.sendTransaction({Â Â   
Â Â Â Â validUntil: Math.floor(Date.now()/1000) + 600,Â Â   
Â Â Â Â messages: [{ address: OWNER_TON_WALLET, amount: tonAmountNano, stateInit: undefined, payload: undefined }],Â Â   
Â Â });Â Â   
Â Â document.getElementById('depositStatus').textContent = 'ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ Ğ² ÑĞµÑ‚Ğ¸ TONâ€¦';Â Â   
Â Â // ÑĞ¾Ğ¾Ğ±Ñ‰Ğ°ĞµĞ¼ Ğ±ÑĞºÑƒ â€” Ğ¾Ğ½ Ğ½Ğ°Ğ¹Ğ´Ñ‘Ñ‚ Ğ¿Ğ»Ğ°Ñ‚Ñ‘Ğ¶ Ğ¸ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ (Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸ 10%)Â Â   
Â Â const res = await fetch(getApi('/api/checkDeposit'), { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ uid: appUser.uid, amount: amt })});Â Â   
Â Â const data = await res.json();Â Â   
Â Â if(data.ok){ addTon( +( (amt * 0.9).toFixed(2) ) ); // front Ğ¿Ğ¾ĞºĞ°Ğ¶ĞµÑ‚ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ğ¾Ğµ 90%Â Â   
Â Â Â Â if(!appUser.firstDepositAt) appUser.firstDepositAt = Date.now();Â Â   
Â Â Â Â await userRef.update({ balances: appUser.balances, firstDepositAt: appUser.firstDepositAt });Â Â   
Â Â Â Â renderAll(); document.getElementById('depositStatus').textContent = 'Ğ”ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ¸ Ğ·Ğ°Ñ‡Ğ¸ÑĞ»ĞµĞ½ (Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸).';Â Â   
Â Â } else {Â Â   
Â Â Â Â document.getElementById('depositStatus').textContent = 'ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑÑ Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ.';Â Â   
Â Â }Â Â   
};Â Â   
Â Â   
/* ========= WITHDRAW ========= */Â Â   
document.getElementById('btnWithdraw').onclick = async ()=>{Â Â   
Â Â const address = document.getElementById('withdrawAddress').value.trim();Â Â   
Â Â const amount = +document.getElementById('withdrawAmount').value;Â Â   
Â Â if(!addressÂ  !amountÂ  amount <= 0) return alert('Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ Ğ¸ ÑÑƒĞ¼Ğ¼Ñƒ');Â Â   
Â Â if((appUser.balances.ton || 0) < amount) return alert('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ TON');Â Â   
Â Â const fee = +(amount * 0.10).toFixed(6); // 10% ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸ÑÂ Â   
Â Â const totalDeduct = +(amount + fee).toFixed(6);Â Â   
Â Â if((appUser.balances.ton || 0) < totalDeduct) return alert('ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ TON Ğ´Ğ»Ñ Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚Ñ‹ Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ ĞºĞ¾Ğ¼Ğ¸ÑÑĞ¸Ğ¸');Â Â   
Â Â // ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµĞ¼ ÑÑ€Ğ°Ğ·ÑƒÂ Â   
Â Â appUser.balances.ton = +( (appUser.balances.ton || 0) - totalDeduct ).toFixed(6);Â Â   
Â Â await userRef.update({ balances: appUser.balances });Â Â   
Â Â // Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ·Ğ°ÑĞ²ĞºÑƒ Ğ½Ğ° Ğ±ÑĞºĞµĞ½Ğ´ (Ğ°Ğ´Ğ¼Ğ¸Ğ½ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´)Â Â   
Â Â const res = await fetch(getApi('/api/requestWithdrawal'), { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ uid: appUser.uid, address, amount })});Â Â   
Â Â const data = await res.json();Â Â   
Â Â if(data.ok){ renderAll(); document.getElementById('withdrawStatus').textContent = 'Ğ—Ğ°ÑĞ²ĞºĞ° Ğ½Ğ° Ğ²Ñ‹Ğ²Ğ¾Ğ´ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ°. ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ 10% ÑƒĞ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ°.'; }Â Â   
Â Â else { document.getElementById('withdrawStatus').textContent = 'ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°ÑĞ²ĞºĞ¸.'; }Â Â   
};Â Â   
Â Â   
/* ========= LEADERBOARD ========= */Â Â   
function subscribeLeaderboard(){Â Â   
Â Â const ref = db.ref('users');Â Â   
Â Â ref.orderByChild('balances/energy').limitToLast(50).on('value', snap=>{Â Â   
Â Â Â Â const list=[]; snap.forEach(ch=>{ const v=ch.val(); list.push({uid:ch.key, energy:v?.balances?.energy||0}); });Â Â   
Â Â Â Â list.sort((a,b)=>b.energy-a.energy);Â Â   
Â Â Â Â const root = document.getElementById('leaderboard'); root.innerHTML='';Â Â   
Â Â Â Â list.forEach((it,i)=>{ const div=document.createElement('div'); div.className='shop-item'; div.innerHTML=<div>#${i+1}</div><div class="muted">uid:${it.uid.slice(0,6)}â€¦</div><div><b>${n(it.energy)}</b> Ñ</div>; root.appendChild(div); });Â Â   
Â Â });Â Â   
}Â Â   
Â Â   
/* ========= NAV ========= */Â Â   
const navItems = document.querySelectorAll('.nav .item');Â Â   
navItems.forEach(btn=>btn.addEventListener('click',()=>{Â Â   
Â Â navItems.forEach(b=>b.classList.remove('active'));Â Â   
Â Â btn.classList.add('active');Â Â   
Â Â const v = btn.getAttribute('data-view');Â Â   
Â Â document.querySelectorAll('.view').forEach(x=>x.classList.remove('active'));Â Â   
Â Â document.getElementById('view-'+v).classList.add('active');Â Â   
}));Â Â   
Â Â   
/* ========= HELPERS ========= */Â Â   
function getApi(path){ const origin = window.location.origin; return (window.RENDER_BASE || origin.replace(/\/$/,'')).replace(/\/$/,'') + path; }  
</script>  
</body>Â Â   
Â Â </html>  
